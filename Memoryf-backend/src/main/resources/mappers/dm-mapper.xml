<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dmMapper">
	
	<resultMap id="dmResultSet" type="dmRoom">
		<id column="ROOM_NO" property="roomNo" />
		<result column="ROOM_NAME" property="roomName" />
		<result column="TARGET_USER_ID" property="targetUserId" />
		<result column="TARGET_USER_NAME" property="targetUserName" />
		<result column="LAST_MESSAGE" property="lastMessage" />
		<result column="LAST_SEND_DATE" property="lastSendDate" />
		<result column="UNREAD_COUNT" property="unreadCount" />
	</resultMap>

	<!-- Dm 방 조회용 쿼리 -->
	<select id="selectDmRoomList" parameterType="string" resultMap="dmResultSet">
		SELECT ROOM_NO
			 , ROOM_NAME
			 , TARGET_USER_ID
			 , TARGET_USER_NAME
			 , LAST_MESSAGE
			 , LAST_SEND_DATE
			 , UNREAD_COUNT
		  FROM TB_DM_ROOM
		 WHERE ROOM_TYPE = 'PRIVATE'
		   AND IS_DEL = 'N'
		   AND MEMBER_ID = #{userId}
	</select>
	

</mapper>