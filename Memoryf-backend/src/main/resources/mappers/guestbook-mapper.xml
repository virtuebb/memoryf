<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="guestbookMapper">

    <!-- 방명록 목록 조회 -->
    <select id="selectGuestbookList"
            parameterType="int"
            resultType="guestbook">
        SELECT
            G.GUESTBOOK_NO        AS guestbookNo,
            G.GUESTBOOK_CONTENT   AS guestbookContent,
            G.CREATE_DATE         AS createDate,
            G.IS_DEL              AS isDel,
            G.MEMBER_NO           AS memberNo,
            G.HOME_NO             AS homeNo
        FROM TB_GUESTBOOK G
        WHERE G.HOME_NO = #{_parameter}
          AND G.IS_DEL = 'N'
        ORDER BY G.CREATE_DATE DESC
    </select>

    <!-- 방명록 등록 -->
    <insert id="insertGuestbook"
            parameterType="guestbook">
        INSERT INTO TB_GUESTBOOK (
            GUESTBOOK_NO,
            GUESTBOOK_CONTENT,
            MEMBER_NO,
            HOME_NO,
            CREATE_DATE,
            IS_DEL
        )
        VALUES (
            SEQ_GUESTBOOK.NEXTVAL,
            #{guestbookContent},
            #{memberNo},
            #{homeNo},
            SYSDATE,
            'N'
        )
    </insert>

</mapper>
