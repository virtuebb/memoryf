<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="memberMapper">

	<resultMap id="memberResultSet" type="member">
		<id column="MEMBER_NO" property="memberNo" />
		<result column="MEMBER_ID" property="memberId" />
		<result column="MEMBER_PWD" property="memberPwd" />
		<result column="MEMBER_NAME" property="memberName" />
		<result column="MEMBER_NICK" property="memberNick" />
		<result column="EMAIL" property="email" />
		<result column="PHONE" property="phone" />
		<result column="GENDER" property="gender" />
		<result column="BIRTHDAY" property="birthday" />
		<result column="CREATE_DATE" property="createDate" />
		<result column="STATUS" property="status" />
	</resultMap>

	<!-- 닉네임으로 회원번호 조회 -->
	<select id="selectMemberNoByNick" parameterType="string" resultType="_int">
		SELECT MEMBER_NO
		FROM TB_MEMBER
		WHERE MEMBER_NICK = #{value}
	</select>

	<!-- 닉네임 업데이트 -->
	<update id="updateMemberNick" parameterType="member">
		UPDATE TB_MEMBER
		SET MEMBER_NICK = #{memberNick}
		WHERE MEMBER_NO = #{memberNo}
	</update>

	<!-- 회원 조회 (비밀번호 확인용) -->
	<select id="selectMember" parameterType="_int" resultMap="memberResultSet">
		SELECT *
		FROM TB_MEMBER
		WHERE MEMBER_NO = #{memberNo}
	</select>

	<!-- 비밀번호 변경 -->
	<update id="updatePwd" parameterType="member">
		UPDATE TB_MEMBER
		SET MEMBER_PWD = #{memberPwd}
		WHERE MEMBER_NO = #{memberNo}
	</update>

	<!-- 이메일 변경 -->
	<update id="updateEmail" parameterType="member">
		UPDATE TB_MEMBER
		SET EMAIL = #{email}
		WHERE MEMBER_NO = #{memberNo}
	</update>

	<!-- 전화번호 변경 -->
	<update id="updatePhone" parameterType="member">
		UPDATE TB_MEMBER
		SET PHONE = #{phone}
		WHERE MEMBER_NO = #{memberNo}
	</update>

	<!-- 회원 탈퇴 -->
	<update id="deleteMember" parameterType="_int">
		UPDATE TB_MEMBER
		SET STATUS = 'Y'
		WHERE MEMBER_NO = #{memberNo}
	</update>

</mapper>
